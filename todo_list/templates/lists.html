{% extends 'base.html' %}

{% block title %}
    {{ user.username }}'s lists - To Do List
{% endblock title %}

{% block head_content %}
    <link rel="stylesheet" href="{{ url_for('static', filename='image-region-selector.css') }}">
{% endblock head_content %}

{% block content %}
    <img src="{{ url_for('static', filename='/uploads/profiles/{}'.format(user.pic_path)) }}" alt="Profile Picture">
    <h1>{{ user.username }}'s lists</h1>
    {% for list in lists %}
        <a href="{{ url_for('list.user_list', user=user.username, listname=list.name) }}">{{ list.name }}</a>
        {% if current_user == user %}
            <form action="{{ url_for('list.delete', list=list.id) }}" method="POST">
                {{ form.hidden_tag() }}
                {{ form.id(value=list.id, type="hidden") }}
                {{ form.submit() }}
            </form>
        {% endif %}
    {% endfor %}
    {% if current_user == user %}
        <a href="{{ url_for('list.create') }}">Create new list</a>
    {% endif %}
    {% if current_user.username == user.username %}
        <h2>Actualizar foto de perfil</h2>
        <div pic-preview></div>
        <form action="{{ url_for('list.upload_image') }}" method="POST" enctype="multipart/form-data">
            {{ picform.hidden_tag() }}
            {{ picform.id(value=user.id, type="hidden") }}
            {{ picform.region(type="hidden", **{"pic-cut" : ""}) }}
            {{ picform.image.label() }}
            {{ picform.image(**{"pic-input" : ""}) }}
            {{ picform.submit() }}
        </form>

        <script src="{{ url_for('static', filename='imageRegionSelector.js') }}"></script>
    {% endif %} 
{% endblock content %}
    